<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>Chương 4. Các tệp yêu cầu trong thư mục debian</title>
    <link rel="stylesheet" type="text/css" href="debian.css"/>
    <meta name="generator" content="DocBook XSL Stylesheets V1.79.1"/>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <link rel="home" href="index.vi.html" title="Debian New Maintainers' Guide"/>
    <link rel="up" href="index.vi.html" title="Debian New Maintainers' Guide"/>
    <link rel="prev" href="modify.vi.html" title="Chương 3. Sửa đổi mã nguồn"/>
    <link rel="next" href="dother.vi.html" title="Chương 5. Other files under the debian directory"/>
  </head>
  <body>
    <div class="navheader">
      <table width="100%" summary="Navigation header">
        <tr>
          <th colspan="3" align="center">Chương 4. Các tệp yêu cầu trong thư mục <code class="filename">debian</code></th>
        </tr>
        <tr>
          <td align="left"><a accesskey="p" href="modify.vi.html"><img src="images/prev.png" alt="Trước đó"/></a> </td>
          <th width="60%" align="center"> </th>
          <td align="right"> <a accesskey="n" href="dother.vi.html"><img src="images/next.png" alt="Kế tiếp"/></a></td>
        </tr>
      </table>
      <hr/>
    </div>
    <div class="chapter">
      <div class="titlepage">
        <div>
          <div>
            <h1 class="title"><a id="dreq"/>Chương 4. Các tệp yêu cầu trong thư mục <code class="filename">debian</code></h1>
          </div>
        </div>
      </div>
      <div class="toc">
        <p>
          <strong>Mục lục</strong>
        </p>
        <dl class="toc">
          <dt>
            <span class="section">
              <a href="dreq.vi.html#control">4.1. <code class="filename">control</code></a>
            </span>
          </dt>
          <dt>
            <span class="section">
              <a href="dreq.vi.html#copyright">4.2. <code class="filename">copyright</code></a>
            </span>
          </dt>
          <dt>
            <span class="section">
              <a href="dreq.vi.html#changelog">4.3. <code class="filename">changelog</code></a>
            </span>
          </dt>
          <dt>
            <span class="section">
              <a href="dreq.vi.html#rules">4.4. <code class="filename">rules</code></a>
            </span>
          </dt>
          <dd>
            <dl>
              <dt>
                <span class="section">
                  <a href="dreq.vi.html#targets">4.4.1. Các target của tệp <code class="filename">rules</code></a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="dreq.vi.html#defaultrules">4.4.2. Tệp <code class="filename">rules</code> mặc định</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="dreq.vi.html#customrules">4.4.3. Tuỳ chỉnh tệp <code class="filename">rules</code></a>
                </span>
              </dt>
            </dl>
          </dd>
        </dl>
      </div>
      <p>
Có một thư mục con mới trong thư mục nguồn của chương trình được gọi là
<code class="filename">debian</code>. Có một số tệp tin trong thư mục này mà chúng ta
nên sửa đổi để các tuỳ chỉnh hành vi của gói.  Các tệp quan trọng trong số
chúng là <code class="filename">control</code>, <code class="filename">changelog</code>,
<code class="filename">copyright</code>, và <code class="filename">rules</code>, chúng là
những tệp yêu cầu đối với tất cả các gói <a href="#ftn.idm1156" class="footnote" id="idm1156"><sup class="footnote">[27]</sup></a>
</p>
      <div class="section">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title"><a id="control"/>4.1. <code class="filename">control</code></h2>
            </div>
          </div>
        </div>
        <p>
Tập tin này chứa các giá trị khác nhau mà <span class="command"><strong>dpkg</strong></span>,
<span class="command"><strong>dselect</strong></span>, <span class="command"><strong>apt-get</strong></span>,
<span class="command"><strong>apt-cache</strong></span>, <span class="command"><strong>aptitude</strong></span>, và các công cụ
quản lý gói khác sẽ sử dụng để quản lý gói. Nó được xác định bởi <a class="ulink" href="http://www.debian.org/doc/debian-policy/ch-controlfields.html">Debian Policy Manual, 5 "Control files and their
fields"</a>
</p>
        <p>
Đây là tệp <code class="filename">control</code> mà <span class="command"><strong>dh_make</strong></span> tạo ra
cho chúng ta:
</p>
        <pre class="screen">
 1 Source: gentoo
 2 Section: unknown
 3 Priority: extra
 4 Maintainer: Josip Rodin &lt;joy-mg@debian.org&gt;
 5 Build-Depends: debhelper (&gt;=9)
 6 Standards-Version: 3.9.4
 7 Homepage: &lt;insert the upstream URL, if relevant&gt;
 8
 9 Package: gentoo
10 Architecture: any
11 Depends: ${shlibs:Depends}, ${misc:Depends}
12 Description: &lt;insert up to 60 chars description&gt;
13  &lt;insert long description, indented with spaces&gt;
</pre>
        <p>
(Tôi đã thêm các số dòng.)
</p>
        <p>
Dòng 1-7 là thông tin điều khiển cho gói nguồn. Dòng 9-13 là thông tin điều
khiển cho gói nhị phân.
</p>
        <p>
Dòng 1 là tên của gói nguồn
</p>
        <p>
Dòng 2 là các mục loại mục chương trình
</p>
        <p>
Như bạn có thể nhận thấy, kho phần mềm Debian được chia làm nhiều khu vục:
<code class="literal">main</code> (phần mềm tự do), <code class="literal">non-free</code> (thật
sự không phải phẩn mềm tự do) and <code class="literal">contrib</code> (phần mềm tự do
phụ thuộc vào phần mềm không tự do). Mỗi loại được chi thánh các phần danh
mục. Vậy chúng ta có <code class="literal">admin</code> cho các chương trình quản trị,
<code class="literal">devel</code> cho các công cụ phát triển, <code class="literal">doc</code>
cho tài liệu, <code class="literal">libs</code> cho thư viện, <code class="literal">mail</code>
cho chương trình liên quan thư điện tử, <code class="literal">net</code> cho ứng dụng
mạng và chaỵ nền, <code class="literal">x11</code> cho các chương trình X11 khác, và
nhiều nữa.  <a href="#ftn.idm1189" class="footnote" id="idm1189"><sup class="footnote">[28]</sup></a>
</p>
        <p>
Chúng ta hãy thay đổi nó thành x11. (Tiền tố <code class="literal">main/</code> với
ngụ ý là chúng ta có thể bỏ qua nó).
</p>
        <p>
Dòng 3 miêu tả mức độ quan trọng của việc ngươì dùng cài đặt gói này.
<a href="#ftn.idm1197" class="footnote" id="idm1197"><sup class="footnote">[29]</sup></a>
</p>
        <div class="itemizedlist">
          <ul class="itemizedlist">
            <li class="listitem">
              <p>
Ưu tiên <code class="literal">optional</code> thường sẽ làm việc với gói mới mà không
xung đột với các gói chứa ưu tiên <code class="literal">required</code>,
<code class="literal">important</code>, hay <code class="literal">standard</code> .
</p>
            </li>
            <li class="listitem">
              <p>
Ưu tiên <code class="literal">extra</code> thường sẽ làm việc với gói mới mà xung dột
với các ưu tiên non-<code class="literal">extra</code> priorities.
</p>
            </li>
          </ul>
        </div>
        <p>
Trường Section và Priority được sử dụng bởi các chương trình front-ends như
<span class="command"><strong>aptitude</strong></span> khi họ sắp xếp gói và chọn mặc định. Khi bạn tải
gói lên Debian, giá trị của hai trường này có thể bị ghi đè bởi các nhà bảo
trì kho lưu trữ, trong trường hợp đó bạn sẽ được thông báo bằng email.
</p>
        <p>
Vì đây là gói ưu tiên thông thường và không xung đột với bất kỳ điều gì
khác, chúng tôi sẽ thay đổi mức độ ưu tiên thành
<code class="literal">optional</code>.
</p>
        <p>
Dòng 4 là tên và địa chỉ email của người bảo trì. Hãy đảm bảo rằng trường
này có tiêu đề <code class="literal">To</code> hợp lệ cho email, bởi vì sau khi tải
lên, hệ thống theo dõi lỗi sẽ sử dụng chính trường này để gửi email lỗi cho
bạn. Tránh sử dụng dấu phẩy, ký hiệu, hoặc dấu ngoặc đơn.
</p>
        <p>
Dòng 5 là trưởng <code class="literal">Build-Depends</code>  bao gồm danh sách của các
gói yêu cầu để xây dựng gói của bạn. Bạn cũng có thể  có thêm trường
<code class="literal">Build-Depends-Indep</code> bổ sung.  <a href="#ftn.idm1220" class="footnote" id="idm1220"><sup class="footnote">[30]</sup></a>. Một số gói như <code class="systemitem">gcc</code> và <code class="systemitem">make</code> là yêu cầu ngầm định bởi gói  <code class="systemitem">build-essential</code> Nếu bạn cần có các công cụ khác
để xây dựng gói của mình, bạn nên thêm chúng vào các trường này. Nhiều mục
được phân cách bằng dấu phẩy; Hãy đọc tiếp để hiểu rõ hơn về các phụ thuộc
gói nhị phân.
</p>
        <div class="itemizedlist">
          <ul class="itemizedlist">
            <li class="listitem">
              <p>
Đối với tất cả các gói đóng gói với lệnh <span class="command"><strong>dh</strong></span> trong tệp tin
<code class="filename">debian/rules</code>, bạn phải có
<code class="literal">debhelper(&gt;=9)</code> trong trường
<code class="literal">Build-Depends</code> để thỏa mãn yêu cầu Chính sách Debian đối
với mục <code class="literal">clean</code>.
</p>
            </li>
            <li class="listitem">
              <p>
Gói nguồn có gói nhị phân với <code class="literal">Architecture: any</code> được xây
dựng lại bởi autobuilder. Vì thủ tục autobuilder này chỉ cài đặt các gói
được liệt kê trong trường <code class="literal">Build-Depends</code> trước khi chạy
<code class="literal">debian/rules build</code> (see <a class="xref" href="build.vi.html#autobuilder" title="6.2. Tự động biên dịch">Phần 6.2, “Tự động biên dịch”</a>),
Trường <code class="literal">Build-Depends</code> rất cần thiết để liệt kê tất cả các
gói cần thiết còn <code class="literal">Build-Depends-Indep</code> hiếm khi được sử
dụng.
</p>
            </li>
            <li class="listitem">
              <p>
Đối với các gói nguồn với các gói nhị phân có kiến trúc
<code class="literal">Architecture: all</code>, trường
<code class="literal">Build-Depends-Indep</code> có thể liệt kê tất cả các gói cần
thiết trừ khi chúng đã được liệt kê trong trường
<code class="literal">Build-Depends</code> để thỏa mãn yêu cầu của Chính sách Debian
đối với mục <code class="literal">clean</code>.
</p>
            </li>
          </ul>
        </div>
        <p>
Nếu bạn không chắc chắn nên sử dụng trường nào, hãy sử dụng trường
<code class="literal">Build-Depends</code> để an toàn.  <a href="#ftn.idm1250" class="footnote" id="idm1250"><sup class="footnote">[31]</sup></a>
</p>
        <p>
Để tìm ra những gói nào cần để xây dựng chương trình của bạn:
</p>
        <pre class="screen">
$ dpkg-depcheck -d ./configure
</pre>
        <p>
Để tự tìm chính xác các phụ thuộc khi xây dựng
<span class="command"><strong><em class="replaceable"><code>/usr/bin/foo</code></em></strong></span>, thực hiện
</p>
        <pre class="screen">
$ objdump -p <em class="replaceable"><code>/usr/bin/foo</code></em> | grep NEEDED
</pre>
        <p>
và cho mỗi thư viện được liệt kê, ví dụ: <span class="command"><strong>libfoo.so.6</strong></span>,
thực hiện
</p>
        <pre class="screen">
$ dpkg -S libfoo.so.6
</pre>
        <p>
Sau đó chỉ cần lấy phiên bản <code class="literal">-dev </code> của mỗi gói như một
mục nhập <code class="literal">Build-Depends</code>.  Nếu bạn sử dụng
<span class="command"><strong>ldd</strong></span> cho mục đích này, nó sẽ báo cáo phụ thuộc lib gián
tiếp, kết quả là 
</p>
        <p>
<code class="systemitem">gentoo</code> yêu cầu <code class="systemitem">xlibs-dev</code>, <code class="systemitem">libgtk1.2-dev</code> and <code class="systemitem">libglib1.2-dev</code> để xây dựng, vâỵ nên chúng ta sẽ
thêm chúng vào vị trí tiếp theo <code class="systemitem">debhelper</code>.
</p>
        <p>
Dòng 6 là phiên bản của <a class="ulink" href="http://www.debian.org/doc/devel-manuals#policy">Debian Policy
Manual</a>mà phần mềm này tuân theo, một trong tài liệu bạn đọc trong
khi xây dựng gói của bạn.
</p>
        <p>
Trên dòng 7, bạn có thể đặt URL của trang chủ thượng nguồn của phần mềm
</p>
        <p>
Dòng 9 là tên của gói nhị phân. Nó thường giống với tên của gói nguồn, nhưng
nó không nhất thiết phải giống nhau.
</p>
        <p>
Dòng 10 mô tả các kiến ​​trúc mà gói nhị phân có thể được biên dịch.  Giá
trị này thường là một trong các tùy chọn sau, tùy thuộc vào loại gói nhị
phân: <a href="#ftn.idm1282" class="footnote" id="idm1282"><sup class="footnote">[32]</sup></a>
</p>
        <div class="itemizedlist">
          <ul class="itemizedlist">
            <li class="listitem">
              <p>
                <code class="literal">Architecture: any</code>
              </p>
              <div class="itemizedlist">
                <ul class="itemizedlist">
                  <li class="listitem">
                    <p>Gói nhị phân được tạo ra là một kiến ​​trúc phụ thuộc thường là các chương
trình xây dựng bằng ngôn ngữ biên dịch.</p>
                  </li>
                </ul>
              </div>
            </li>
            <li class="listitem">
              <p>
                <code class="literal">Architecture: all</code>
              </p>
              <div class="itemizedlist">
                <ul class="itemizedlist">
                  <li class="listitem">
                    <p>Gói nhị phân được tạo ra là một kiến ​​trúc độc lập thường bao gồm các văn
bản, hình ảnh hoặc các tập lệnh theo ngôn ngữ kịch bản.</p>
                  </li>
                </ul>
              </div>
            </li>
          </ul>
        </div>
        <p>
Chúng ta để lại dòng 10 vì nó được viết bằng
C.
<span class="citerefentry"><span class="refentrytitle">dpkg-gencontrol</span>(1)</span>
sẽ tự điền vào trường Architecture một cách thích hợp cho bất kỳ máy nào gói
nguồn này được biên soạn.
</p>
        <p>
Nếu gói của bạn là kiến ​​trúc độc lập (ví dụ: mã shell hoặc kịch bản Perl,
hoặc tài liệu), hãy thay đổi điều này thành <code class="literal">all</code> và đọc
<a class="xref" href="dreq.vi.html#rules" title="4.4. rules">Phần 4.4, “<code class="filename">rules</code>”</a> về <code class="literal">binary-indep</code> thay vì
<code class="literal">binary-arch</code> để xây dựng gói.
</p>
        <p>
Dòng 11 cho thấy một trong những tính năng mạnh mẽ nhất của hệ thống đóng
gói Debian. Gói có thể liên quan đến nhau theo nhiều cách khác nhau.  Ngoài
<code class="literal">Depends</code>, các trường mối quan hệ khác là
<code class="literal">Recommends</code>, <code class="literal">Suggests</code>,
<code class="literal">Pre-Depends</code>, <code class="literal">Breaks</code>,
<code class="literal">Conflicts</code>, <code class="literal">Provides</code> và
<code class="literal">Replaces</code>.
</p>
        <p>
Các công cụ quản lý gói thường có chung hành vi khi đọc các mối quan hệ này;
Nếu không, nó sẽ được giải thích. (See <span class="citerefentry"><span class="refentrytitle">dpkg</span>(8)</span>, <span class="citerefentry"><span class="refentrytitle">dselect</span>(8)</span>, <span class="citerefentry"><span class="refentrytitle">apt</span>(8)</span>,
<span class="citerefentry"><span class="refentrytitle">aptitude</span>(1)</span>, etc.)
</p>
        <p>
Đây là mô tả đơn giản về các mối quan hệ của gói: <a href="#ftn.idm1330" class="footnote" id="idm1330"><sup class="footnote">[33]</sup></a>
</p>
        <div class="itemizedlist">
          <ul class="itemizedlist">
            <li class="listitem">
              <p>
<code class="literal">Depends</code>
</p>
              <p>
Gói của bạn sẽ không được cài đặt trừ khi các gói phụ thuộc được cài đặt. Sử
dụng trường này nếu chương trình của bạn hoàn toàn không chạy (hoặc sẽ gây
ra sự cố nghiêm trọng) trừ khi một gói cụ thể có mặt.
</p>
            </li>
            <li class="listitem">
              <p>
<code class="literal">Recommends</code>
</p>
              <p>
Sử dụng trường này cho cho các gói không bắt buộc nhưng thường được sử dụng
kèm với chương trình của bạn.  Khi người dùng cài đặt chương trình của bạn,
các công cụ quản lý gói có thể sẽ nhắc cài đặt gói đề
xuất. <span class="command"><strong>aptitude</strong></span> và <span class="command"><strong>apt-get</strong></span> cài đặt các
gói được đề xuất cùng với gói của bạn theo mặc định (nhưng người dùng có thể
vô hiệu hóa hành vi này). <span class="command"><strong>dpkg</strong></span> sẽ bỏ qua trường này.
</p>
            </li>
            <li class="listitem">
              <p>
<code class="literal">Suggests</code>
</p>
              <p>
Sử dụng trường này cho các gói sẽ hoạt động tốt với chương trình của bạn
nhưng không cần thiết. Khi người dùng cài đặt chương trình của bạn, họ sẽ
không được nhắc nhở để cài đặt gói đề xuất.  <span class="command"><strong>aptitude</strong></span> có
thể được cấu hình để cài đặt các gói đề xuất cùng với gói của bạn nhưng đây
không phải là mặc định. <span class="command"><strong>dpkg</strong></span> và
<span class="command"><strong>apt-get</strong></span> sẽ bỏ qua trường này.
</p>
            </li>
            <li class="listitem">
              <p>
<code class="literal">Pre-Depends</code>
</p>
              <p>
Trường này mạnh hơn <code class="literal">Depends</code>. Gói sẽ không được cài đặt
trừ khi các gói mà nó được phụ thuộc trước được cài đặt và <span class="emphasis"><em>được
cấu hình chính xác</em></span>. Sử dụng điều này một cách
<span class="emphasis"><em>rất</em></span> tỉ mỉ và chỉ sau khi thảo luận về nó trên danh sách
gửi thư <a class="ulink" href="http://lists.debian.org/debian-devel/">debian-devel@lists.debian.org
</a>. Đọc: đừng sử dụng nó.:-)
</p>
            </li>
            <li class="listitem">
              <p>
<code class="literal">Conflicts</code>
</p>
              <p>
Gói sẽ không được cài đặt cho đến khi tất cả các gói xung đột đã được gỡ
bỏ. Sử dụng này nếu chương trình của bạn hoàn toàn không chạy hoặc sẽ gây ra
những vấn đề nghiêm trọng nếu một gói cụ thể có mặt.
</p>
            </li>
            <li class="listitem">
              <p>
<code class="literal">Breaks</code>
</p>
              <p>
Khi cài đặt gói nó sẽ phá vỡ tất cả các gói được liệt kê. Thông thường
trường <code class="literal">Breaks</code> chỉ định áp dụng các phiên bản sớm hơn một
giá trị nhất định.  Nói chung là sử dụng các công cụ quản lý gói cấp cao để
nâng cấp các gói được liệt kê.
</p>
            </li>
            <li class="listitem">
              <p>
<code class="literal">Provides</code>
</p>
              <p>
Đối với một số loại gói có nhiều tên ảo khác đã được xác định. Bạn có thể có
một danh sách đầy đủ trong tệp <a class="ulink" href="http://www.debian.org/doc/packaging-manuals/virtual-package-names-list.txt">virtual-package-names-list.txt.gz </a>. Sử dụng
điều này nếu chương trình của bạn cung cấp một chức năng của một gói ảo hiện
có.
</p>
            </li>
            <li class="listitem">
              <p>
<code class="literal">Replaces</code>
</p>
              <p>
Sử dụng điều này khi chương trình của bạn thay thế các tệp từ một gói khác
hoặc thay thế hoàn toàn một gói khác (được sử dụng kết hợp với
<code class="literal">Conflicts</code>). Các tệp từ các gói có tên sẽ được ghi đè bằng
các tệp từ gói của bạn.
</p>
            </li>
          </ul>
        </div>
        <p>
Tất cả các trường này có cú pháp thống nhất.  Họ là một danh sách các tên
gói được phân cách bằng dấu phẩy. Các tên gói này cũng có thể là danh sách
các tên gói thay thế, được phân cách bằng ký hiệu thanh dọc
<code class="literal">|</code> (biểu tượng ống).
</p>
        <p>
Các trường có thể hạn chế khả năng áp dụng của chúng đối với các phiên bản
cụ thể của từng gói có tên. Hạn chế của từng gói riêng lẻ được liệt kê trong
dấu ngoặc đơn sau tên của nó và phải có một mối quan hệ từ danh sách dưới
đây và theo sau là một giá trị số phiên bản.  Các mối quan hệ được cho phép
là: <code class="literal">&lt;&lt;</code>, <code class="literal">&lt;=</code>,
<code class="literal">=</code>, <code class="literal">&gt;=</code>, và
<code class="literal">&gt;&gt;</code> tương ứng với bé hơn, bé hơn hoặc bằng, chính
xác bằng, lớn hơn hoặc bằng, và lớn hơn. Ví dụ,
</p>
        <pre class="screen">
Depends: foo (&gt;= 1.2), libbar1 (= 1.3.4)
Conflicts: baz
Recommends: libbaz4 (&gt;&gt; 4.0.7)
Suggests: quux
Replaces: quux (&lt;&lt; 5), quux-foo (&lt;= 7.6)
</pre>
        <p>
Tính năng cuối cùng bạn cần biết là về <code class="literal">${shlibs:Depends}</code>,
<code class="literal">${perl:Depends}</code>, <code class="literal">${misc:Depends}</code>, vân
vân.
</p>
        <p>
<span class="citerefentry"><span class="refentrytitle">dh_shlibdeps</span>(1)</span> tính toán sự phụ thuộc vào các thư
viện chia sẻ cho các gói nhị phân. Nó sinh ra một danh sách củả tệp thực thi
<a class="ulink" href="http://wikipedia.org/wiki/Executable_and_Linkable_Format">ELF</a> và thư viện chia sẻ mà nó đã tìm cho mỗi gói
nhị phân. Danh sách này được sử dụng để thay thế
<code class="literal">${shlibs:Depends}</code>.
</p>
        <p>
<span class="citerefentry"><span class="refentrytitle">dh_perl</span>(1)</span> tính toán sự phụ thuộc Perl. Nó
sinh ra một danh sách của các phụ thuộc trong <code class="literal">perl</code> hoặc
<code class="literal">perlapi</code> cho mỗi gói nhị phân.  Danh sách này được sử dụng
thay thế cho <code class="literal">${perl:Depends}</code>.
</p>
        <p>
Một vài lệnh <code class="systemitem">debhelper</code> có thể làm
cho gói được sinh ra phụ thuộc vào vài gói mở rộng thêm. Tất cả các lệnh như
vậy sinh ra một danh sách của các gói cho mỗi gói nhị phân. Danh sách này
được sử dụng để thay thế cho <code class="literal">${misc:Depends}</code>.
</p>
        <p>
<span class="citerefentry"><span class="refentrytitle">dh_gencontrol</span>(1)</span> tạo ra
<code class="filename">DEBIAN/control</code> cho mỗi gói nhị phân trong khi thay thế
<code class="literal">${shlibs:Depends}</code>, <code class="literal">${perl:Depends}</code>,
<code class="literal">${misc:Depends}</code>, vân vân.
</p>
        <p>
Có tất cả những điều đó, chúng ta có thể để trường
<code class="literal">Depends</code> chính xác như bây giờ và chèn một dòng sau là
<code class="literal">Suggests: file</code>, bởi vì <code class="systemitem">gentoo</code> có thể sử dụng một số tính năng được cung
cấp bởi gói <code class="systemitem">file</code> .
</p>
        <p> Dòng 9 là URL Trang chủ.  Giả sử rằng đây là <a class="ulink" href="http://www.obsession.se/gentoo/">http://www.obsession.se/gentoo/</a>.
</p>
        <p>
Dòng 12 là mô tả ngắn. Thiết bị đầu cuối thông thường có 80 cột nên không
được dài hơn 60 ký tự. Tôi sẽ thay đổi nó thành  <code class="literal">fully
GUI-configurable, two-pane X file manager</code>
</p>
        <p>
Dòng 13 là nơi diễn tả dài.  Đây sẽ là một đoạn cho biết thêm chi tiết về
gói. Cột 1 của mỗi dòng nên để trống.  Không có dòng trắng, nhưng bạn có thể
đặt một <code class="literal">. </code> (dấu chấm) trong một cột để mô phỏng.  Ngoài
ra, không có nhiều dòng trống sau mô tả dài.  <a href="#ftn.idm1427" class="footnote" id="idm1427"><sup class="footnote">[34]</sup></a>
</p>
        <p>
Chúng ta có thể chèn các trường <code class="literal">Vcs-*</code> để ghi lại thông
tin của VCS trong các dòng 6 và 7. <a href="#ftn.idm1432" class="footnote" id="idm1432"><sup class="footnote">[35]</sup></a> Hãy
giả sử rằng gói <code class="systemitem">gentoo</code> có VCS của nó
nằm trong Debian Alioth Git Service ở
<code class="literal">git://git.debian.org/git/collab-maint/gentoo.git</code>.
</p>
        <p>
Cuối cùng, đây là tệp <code class="filename">control</code> đã được cập nhật
</p>
        <pre class="screen">
 1 Source: gentoo
 2 Section: x11
 3 Priority: optional
 4 Maintainer: Josip Rodin &lt;joy-mg@debian.org&gt;
 5 Build-Depends: debhelper (&gt;=9), xlibs-dev, libgtk1.2-dev, libglib1.2-dev
 6 Standards-Version: 3.9.4
 7 Vcs-Git: git://git.debian.org/git/collab-maint/gentoo.git
 8 Vcs-browser: http://git.debian.org/?p=collab-maint/gentoo.git
 9 Homepage: http://www.obsession.se/gentoo/
10
11 Package: gentoo
12 Architecture: any
13 Depends: ${shlibs:Depends}, ${misc:Depends}
14 Suggests: file
15 Description: fully GUI-configurable, two-pane X file manager
16  gentoo is a two-pane file manager for the X Window System. gentoo lets the
17  user do (almost) all of the configuration and customizing from within the
18  program itself. If you still prefer to hand-edit configuration files,
19  they're fairly easy to work with since they are written in an XML format.
20  .
21  gentoo features a fairly complex and powerful file identification system,
22  coupled to an object-oriented style system, which together give you a lot
23  of control over how files of different types are displayed and acted upon.
24  Additionally, over a hundred pixmap images are available for use in file
25  type descriptions.
26  .
29  gentoo was written from scratch in ANSI C, and it utilizes the GTK+ toolkit
30  for its interface.
</pre>
        <p>
(Tôi đã thêm các số dòng.)
</p>
      </div>
      <div class="section">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title"><a id="copyright"/>4.2. <code class="filename">copyright</code></h2>
            </div>
          </div>
        </div>
        <p>
Tập tin này chứa thông tin về bản quyền và giấy phép của các nguồn thượng
nguồn  <a class="ulink" href="http://www.debian.org/doc/debian-policy/ch-docs.html#s-copyrightfile">Debian Policy Manual, 12.5 "Copyright
information"</a> kiểm soát nội dung của nó và <a class="ulink" href="http://dep.debian.net/deps/dep5/">DEP-5:
Machine-parseable <code class="filename">debian/copyright</code></a> cung cấp các
chỉ dẫn cho định dạng của nó
</p>
        <p>
<span class="command"><strong>dh_make</strong></span> có thể cho bạn một tệp mẫu
<code class="filename">copyright</code> . Hãy sử dụng tuỳ chọn <code class="literal">--copyright
gpl2</code> để lấy tệp mẫu cho  gói  <code class="systemitem">gentoo</code> phát hành dưói giấy phép GPL-2.
</p>
        <p>
Bạn phải điền thông tin còn thiếu để hoàn thành tệp này, chẳng hạn như nơi
tạo ra gói ,thông báo bản quyền thực tế, và giấy phép. Đối với một số giấy
phép phần mềm tự do thông thường (GNU GPL-1, GNU GPL-2, GNU GPL-3, LGPL-2,
LGPL-2.1, LGPL-3, GNU FDL-1.2, GNU FDL-1.3, Apache-2.0, hoặc Artistic
license), bạn chỉ cần tham khảo các tệp thích hợp trong thư mục
<code class="filename">/usr/share/common-licenses/</code> tồn tại trên bất kỳ hệ
thống Debian. Nếu không, bạn phải bao gồm giấy phép đầy đủ.
</p>
        <p>
Tóm lại, tệp <code class="filename">copyright</code> của gói <code class="systemitem">gentoo</code> trông sẽ như sau:
</p>
        <pre class="screen">
 1 Format-Specification: http://svn.debian.org/wsvn/dep/web/deps/dep5.mdwn?op=file&amp;rev=135
 2 Name: gentoo
 3 Maintainer: Josip Rodin &lt;joy-mg@debian.org&gt;
 4 Source: http://sourceforge.net/projects/gentoo/files/
 5
 6 Copyright: 1998-2010 Emil Brink &lt;emil@obsession.se&gt;
 7 License: GPL-2+
 8
 9 Files: icons/*
10 Copyright: 1998 Johan Hanson &lt;johan@tiq.com&gt;
11 License: GPL-2+
12
13 Files: debian/*
14 Copyright: 1998-2010 Josip Rodin &lt;joy-mg@debian.org&gt;
15 License: GPL-2+
16
17 License: GPL-2+
18  This program is free software; you can redistribute it and/or modify
19  it under the terms of the GNU General Public License as published by
20  the Free Software Foundation; either version 2 of the License, or
21  (at your option) any later version. 
22  .
23  This program is distributed in the hope that it will be useful,
24  but WITHOUT ANY WARRANTY; without even the implied warranty of
25  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
26  GNU General Public License for more details.
27  .
28  You should have received a copy of the GNU General Public License along
29  with this program; if not, write to the Free Software Foundation, Inc.,
30  51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
31  .
32  On Debian systems, the full text of the GNU General Public
33  License version 2 can be found in the file
34  `/usr/share/common-licenses/GPL-2'.
</pre>
        <p>
(Tôi đã thêm các số dòng.)
</p>
        <p>
Hãy làm theo HOWTO cung cấp bởi ftpmasters và gửi tới debian-devel-announce:
<a class="ulink" href="http://lists.debian.org/debian-devel-announce/2006/03/msg00023.html">http://lists.debian.org/debian-devel-announce/2006/03/msg00023.html</a>.
</p>
      </div>
      <div class="section">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title"><a id="changelog"/>4.3. <code class="filename">changelog</code></h2>
            </div>
          </div>
        </div>
        <p>
Đây là tệp yêu cầu, có định dạng đặc biệt được mô tả trong <a class="ulink" href="http://www.debian.org/doc/debian-policy/ch-source.html#s-dpkgchangelog">Debian Policy Manual, 4.4
"debian/changelog"</a>. Định dạng này được sử dụng bởi
<span class="command"><strong>dpkg</strong></span> và các chương trình khác để đọc số phiên bản, số sửa
đổi, bản phân phối và tính khẩn cấp của gói
</p>
        <p>
Đối với bạn, điều này cũng rất quan trọng vì bạn nên ghi lại tất cả những
thay đổi bạn đã làm. Nó sẽ giúp mọi người tải gói của bạn và xem liệu có vấn
đề gì với gói mà họ cần biết hay không. Nó sẽ được lưu lại như
<code class="filename">/usr/share/doc/gentoo/changelog.Debian.gz</code> trong gói nhị
phân.
</p>
        <p>
<span class="command"><strong>dh_make</strong></span> tạo ra tệp mặc định, và nó sẽ trông như sau:
</p>
        <pre class="screen">
1  gentoo (0.9.12-1) unstable; urgency=low
2
3   * Initial release (Closes: #<em class="replaceable"><code>nnnn</code></em>)  &lt;<em class="replaceable"><code>nnnn</code></em> is the bug number of your ITP&gt;
4
5  -- Josip Rodin &lt;joy-mg@debian.org&gt;  Mon, 22 Mar 2010 00:37:31 +0100
6
</pre>
        <p>
(Tôi đã thêm các số dòng.)
</p>
        <p>
Dòng 1 là tên gói, phiên bản, phân phối và mức độ khẩn cấp. Tên phải khớp
với tên gói nguồn; Phân phối nên là <code class="literal">unstable</code>, và không
nên thay đổi mức độ khẩn cấp lên bất cứ điều gì cao hơn
<code class="literal">low</code>.  :-)
</p>
        <p>
Dòng 3-5 là một mục thông tin, nơi bạn ghi lại những thay đổi được thực hiện
trong bản sửa đổi gói này (không phải là những thay đổi ở thượng nguồn - có
một tệp tin đặc biệt cho mục đích đó được tạo ra bởi các tác giả thượng
nguồn, mà sau này bạn sẽ cài đặt dưới dạng
<code class="filename">/usr/share/doc/gentoo/changelog.gz</code>). Hãy giả sử báo lỗi
ITP (Intent To Package) của bạn có số là <code class="literal">12345</code>. Các dòng
mới chèn trên dòng trên cùng nhất của mục nội dung này và bắt đầu với
<code class="literal">*</code> (dấu sao).  Bạn có thể  thực hiện điều này với
<span class="citerefentry"><span class="refentrytitle">dch</span>(1)</span>, hoặc bằng tay với một trình soạn thảo
</p>
        <p>
Để ngăn chặn một gói bị vô tình tải lên trước khi hoàn thành gói, bạn nên
thay đổi giá trị phân phối thành chưa phát hành
<code class="literal">UNRELEASED</code>.
</p>
        <p>
Bạn sẽ kết thúc với một cái gì đó như thế này:
</p>
        <pre class="screen">
1  gentoo (0.9.12-1) UNRELEASED; urgency=low
2
3   * Initial Release. Closes: #12345
4   * This is my first Debian package.
5   * Adjusted the Makefile to fix $(DESTDIR) problems.
6
7  -- Josip Rodin &lt;joy-mg@debian.org&gt;  Mon, 22 Mar 2010 00:37:31 +0100
8
</pre>
        <p>
(Tôi đã thêm các số dòng.)
</p>
        <p>
Khi bạn đã hài lòng với tất cả các thay đổi và ghi lại chúng trong
<code class="filename">changelog</code>, bạn nên thay đổi giá trị phân phối từ
<code class="literal">UNRELEASED</code> sang  <code class="literal">unstable</code> (hoặc ngay
cả <code class="literal">experimental</code>).  <a href="#ftn.idm1496" class="footnote" id="idm1496"><sup class="footnote">[36]</sup></a>
</p>
        <p>
Bạn có thể đọc về cập nhật tệp <code class="filename">changelog</code> tại <a class="xref" href="update.vi.html" title="Chương 8. Cập nhật gói phần mềm">Chương 8, <em>Cập nhật gói phần mềm</em></a>.
</p>
      </div>
      <div class="section">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title"><a id="rules"/>4.4. <code class="filename">rules</code></h2>
            </div>
          </div>
        </div>
        <p>
Bây giờ chúng ta cần phải xem xét các quy tắc chính xác mà <span class="citerefentry"><span class="refentrytitle">dpkg-buildpackage</span>(1)</span> sẽ thực sự sử dụng để tạo gói. Tệp này thật sự là tệp
<code class="filename">Makefile</code>, nhưng nó khác với (các) tệp Makefile trong
nguồn của thượng nguồn. Và không giống các tệp khác trong thư mục
<code class="filename">debian</code>, đây là tệp thực thi
</p>
        <div class="section">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a id="targets"/>4.4.1. Các target của tệp <code class="filename">rules</code></h3>
              </div>
            </div>
          </div>
          <p>
Mọi tệp <code class="filename">rules</code>, giống bất kỳ
<code class="filename">Makefile</code> khác, bao gồm một vài quy tắc, địng nghĩa nên
target và cách nó thực hiện như thế nào. <a href="#ftn.idm1518" class="footnote" id="idm1518"><sup class="footnote">[37]</sup></a> Một quy tắc mới bắt đầu với tuyên bố tên target của nó trong cột
đầu tiên. Các dòng theo sau bắt đầu với phím TAB (ASCII 9) để chỉ định công
thức thực hiện target đó. Các dòng trống và các dòng bắt đầu với
<code class="literal">#</code> (thăng) được xem là nhận xét và bị bỏ qua. <a href="#ftn.idm1526" class="footnote" id="idm1526"><sup class="footnote">[38]</sup></a>
</p>
          <p>
Một quy tắc mà bạn muốn thực hiện được gọi bởi tên target của nó như là một
đối số dòng lệnh. Ví dụ,  <code class="literal">debian/rules
<em class="replaceable"><code>build</code></em></code> và <code class="literal">fakeroot make -f
debian/rules <em class="replaceable"><code>binary</code></em></code> thực hiện các quy
tắc cho các target là <code class="literal"><em class="replaceable"><code>build</code></em></code> và
<code class="literal"><em class="replaceable"><code>binary</code></em></code>.
</p>
          <p>
Đây là một giải thích đơn giản của các target
</p>
          <div class="itemizedlist">
            <ul class="itemizedlist">
              <li class="listitem">
                <p>
<code class="literal">clean</code>: làm sạch tất cả các tệp đã biên dịch, sinh ra và
vô ích trong build-tree(Yêu cầu)
</p>
              </li>
              <li class="listitem">
                <p>
<code class="literal">build</code>: xây dựng từ mã nguồn thành các chương trình và
sinh các tài liệu trong build-tree.  (Bắt buộc)
</p>
              </li>
              <li class="listitem">
                <p>
<code class="literal">build-arch</code>: xây dựng mã nguồn thành các chuơng trình phụ
thuộc vào kiến trúc trong build-tree.  (Bắt buộc)
</p>
              </li>
              <li class="listitem">
                <p>
<code class="literal">build-indep</code>: xây dựng mã nguổn thành các tài liệu không
phụ thuộc và kiến trúc trong build-tree. (Bắt buộc)
</p>
              </li>
              <li class="listitem">
                <p>
<code class="literal">install</code>: cài đặt các tệp tin vào hệ thống giả cho mỗi gói
nhị phần dưới thư mục <code class="filename">debian</code>.  Nếu địng nghĩa target
<code class="literal">binary*</code> sẽ có hiệu quả phụ thuộc vào target này.  (Tuỳ
chọn)
</p>
              </li>
              <li class="listitem">
                <p>
<code class="literal">binary</code>: tạo tất cả gói nhị phân ( sẽ hiểu quả khi là sự
kết hợp của <code class="literal">binary-arch</code> và
<code class="literal">binary-indep</code> .  (Bắt buộc)<a href="#ftn.idm1562" class="footnote" id="idm1562"><sup class="footnote">[39]</sup></a>
</p>
              </li>
              <li class="listitem">
                <p>
<code class="literal">binary-arch</code>: tạo các gói nhị phân phụ thuộc
(<code class="literal">Architecture: any</code>) trong thụ mục cha.  (Bắt
buộc)<a href="#ftn.idm1570" class="footnote" id="idm1570"><sup class="footnote">[40]</sup></a>
</p>
              </li>
              <li class="listitem">
                <p>
<code class="literal">binary-indep</code>: để tạo ra các gói nhị phân không phụ thuộc
(arch-independent)(<code class="literal">Architecture: all</code>) trong thu mục
cha. (Bắt buộc)<a href="#ftn.idm1578" class="footnote" id="idm1578"><sup class="footnote">[41]</sup></a>
</p>
              </li>
              <li class="listitem">
                <p>
<code class="literal">get-orig-source</code>: để lấy phiên bản gần nhất của gói nguồn
gốc từ một bản lưu trữ thượng nguồn.  (Tuỳ chọn)
</p>
              </li>
            </ul>
          </div>
          <p>
Bạn bây giờ có thể bị choáng ngợp, nhưng mọi thứ đơn giản hơn nhiều khi kiểm
tra tệp <code class="filename">rules</code> mà <span class="command"><strong>dh_make</strong></span> sử dụng làm
mặc định.
</p>
        </div>
        <div class="section">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a id="defaultrules"/>4.4.2. Tệp <code class="filename">rules</code> mặc định</h3>
              </div>
            </div>
          </div>
          <p>
Phiên bản <span class="command"><strong>dh_make</strong></span> mới nhất tạo một tệp
<code class="filename">rules</code> đơn giản nhưng mạnh mẽ bằng sử dụng lệnh
<span class="command"><strong>dh</strong></span>:
</p>
          <pre class="screen">
 1 #!/usr/bin/make -f
 2 # Xem debhelper(7) (bỏ chú thích để kích hoạt)
 3 # output every command that modifies files on the build system.
 4 #DH_VERBOSE = 1
 5 
 6 # see EXAMPLES in dpkg-buildflags(1) and read /usr/share/dpkg/*
 7 DPKG_EXPORT_BUILDFLAGS = 1
 8 include /usr/share/dpkg/default.mk
 9 
10 # see FEATURE AREAS in dpkg-buildflags(1)
11 #export DEB_BUILD_MAINT_OPTIONS = hardening=+all
12
13 # see ENVIRONMENT in dpkg-buildflags(1)
14 # package maintainers to append CFLAGS
15 #export DEB_CFLAGS_MAINT_APPEND  = -Wall -pedantic
16 # package maintainers to append LDFLAGS
17 #export DEB_LDFLAGS_MAINT_APPEND = -Wl,--as-needed
18 
19 # main packaging script based on dh7 syntax
20 %:
21         dh $@ 
</pre>
          <p>
(Tôi đã thêm các số dòng và thêm một số chú thích. Trong tệp tin
<code class="filename">rules</code> thực tế, các ký tự khoảng cách là một mã TAB.)
</p>
          <p>
Có thể bạn đã quen thuộc với các dòng như dòng 1 từ kịch bản shell hay
Perl. Nó nói với hệ điều hành rằng tập tin này sẽ được xử lý với
<code class="filename">/usr/bin/make</code>.
</p>
          <p>
Dòng 4 có thể bỏ ghi chú để đặt biến <code class="literal">DH_VERBOSE</code> thành 1,
sao cho các lệnh <span class="command"><strong>dh</strong></span> hiển thị các lệnh
<span class="command"><strong>dh_*</strong></span> được thực hiện.  Bạn cũng có thể thêm một dòng
<code class="literal">export DH_OPTIONS=-v</code> ở đây, để mỗi
<span class="command"><strong>dh_*</strong></span> hiển thị thêm nhiểu kết quả đầu ra mà lệnh được thực
hiện như thế nào. Điều này giúp bạn hiểu chính xác điều gì đang xảy ra đằng
sau tệp tin đơn giản <code class="filename">rules</code> này và để gỡ lỗi các vấn đề
gặp phải. <span class="command"><strong>dh</strong></span> là công cụ mới được thiết kế để trở thành
một phần cốt lõi của công cụ <code class="systemitem">debhelper</code>, và không che giấu bất cứ điều gì từ
bạn.
</p>
          <p>
Các dòng 20 và 21 là nơi mà tất cả công việc được thực hiện với một quy tắc
ngầm định sử dụng quy tắc mẫu. Dấu hiệu phần trăm có nghĩa là"bất kỳ mục
tiêu" nào, sau đó gọi một chương trình duy nhất, <span class="command"><strong>dh</strong></span>, với
tên mục tiêu.  <a href="#ftn.idm1610" class="footnote" id="idm1610"><sup class="footnote">[42]</sup></a> Lệnh
<span class="command"><strong>dh</strong></span> là một gói tập lệnh bao gồm các trình tự thích hợp của
các chương trình <span class="command"><strong>dh_*</strong></span> tùy thuộc vào đối số của nó.
<a href="#ftn.idm1626" class="footnote" id="idm1626"><sup class="footnote">[43]</sup></a>
</p>
          <div class="itemizedlist">
            <ul class="itemizedlist">
              <li class="listitem">
                <p>
<code class="literal">debian/rules clean</code> chạy <code class="literal">dh clean</code>,
chúng bao gồm chạy các lệnh sau:
</p>
                <pre class="screen">
dh_testdir
dh_auto_clean
dh_clean
</pre>
              </li>
              <li class="listitem">
                <p>
<code class="literal">debian/rules build</code> chạy <code class="literal">dh build</code>;
chúng bao gồm chạy các lệnh sau:
</p>
                <pre class="screen">
dh_testdir
dh_auto_configure
dh_auto_build
dh_auto_test
</pre>
              </li>
              <li class="listitem">
                <p>
<code class="literal">fakeroot debian/rules binary</code> chạy <code class="literal">fakeroot dh
binary</code>; chúng bao gồm chạy các lệnh sau<a href="#ftn.idm1650" class="footnote" id="idm1650"><sup class="footnote">[44]</sup></a>:
</p>
                <pre class="screen">
dh_testroot
dh_prep
dh_installdirs
dh_auto_install
dh_install
dh_installdocs
dh_installchangelogs
dh_installexamples
dh_installman
dh_installcatalogs
dh_installcron
dh_installdebconf
dh_installemacsen
dh_installifupdown
dh_installinfo
dh_installinit
dh_installmenu
dh_installmime
dh_installmodules
dh_installlogcheck
dh_installlogrotate
dh_installpam
dh_installppp
dh_installudev
dh_installwm
dh_installxfonts
dh_bugfiles
dh_lintian
dh_gconf
dh_icons
dh_perl
dh_usrlocal
dh_link
dh_compress
dh_fixperms
dh_strip
dh_makeshlibs
dh_shlibdeps
dh_installdeb
dh_gencontrol
dh_md5sums
dh_builddeb
</pre>
              </li>
              <li class="listitem">
                <p>
<code class="literal">fakeroot debian/rules binary-arch</code> chạy <code class="literal">fakeroot
dh binary-arch</code>; chúng bao gồm chạy các lệnh tương tự như
<code class="literal">fakeroot dh binary</code> nhưng với tuỳ chọn
<code class="literal">-a</code> cho mỗi câu lệnh.
</p>
              </li>
              <li class="listitem">
                <p>
<code class="literal">fakeroot debian/rules binary-indep</code> chạy <code class="literal">fakeroot
dh binary-indep</code>; chúng bao gồm hầu hết các lệnh tương tự như
<code class="literal">fakeroot dh binary</code> nhưng trừ các lệnh
<span class="command"><strong>dh_strip</strong></span>, <span class="command"><strong>dh_makeshlibs</strong></span>, và
<span class="command"><strong>dh_shlibdeps</strong></span> và với tuỳ chọn -i cho mỗi lệnh còn lại.
</p>
              </li>
            </ul>
          </div>
          <p>
Các chức năng của lệnh <span class="command"><strong>dh_*</strong></span> phần lớn chính là tên của
chúng  <a href="#ftn.idm1670" class="footnote" id="idm1670"><sup class="footnote">[45]</sup></a> Có một vài điểm nổi bật có thể
giải thích một cách đơn giản ở đây là giả sử một môi trường xây dựng điển
hình dựa trên một <code class="filename">Makefile</code>: <a href="#ftn.idm1675" class="footnote" id="idm1675"><sup class="footnote">[46]</sup></a>
</p>
          <div class="itemizedlist">
            <ul class="itemizedlist">
              <li class="listitem">
                <p>
<span class="command"><strong>dh_auto_clean</strong></span> thường thực hiện như sau nếu một tệp
<code class="filename">Makefile</code> tồn tại với target là
<code class="literal">distclean</code>.  <a href="#ftn.idm1685" class="footnote" id="idm1685"><sup class="footnote">[47]</sup></a>
</p>
                <pre class="screen">
make distclean
</pre>
              </li>
              <li class="listitem">
                <p>
<span class="command"><strong>dh_auto_configure</strong></span> thường thực hiện như sau nếu
<code class="filename">./configure</code> tồn tại (các đối số được viết tắt cho dễ
đọc).
</p>
                <pre class="screen">
/configure --prefix=/usr --sysconfdir=/etc --localstatedir=/var ...
</pre>
              </li>
              <li class="listitem">
                <p>
<span class="command"><strong>dh_auto_build</strong></span> thường thực hiện target đầu tiền của tệp
<code class="filename">Makefile</code> nếu nó tồn tại.
</p>
                <pre class="screen">
make
</pre>
              </li>
              <li class="listitem">
                <p>
<span class="command"><strong>dh_auto_test</strong></span> thường thực hiện như sau nếu
<code class="filename">Makefile</code> tồn tại target <code class="literal">test</code>.
<a href="#ftn.idm1707" class="footnote" id="idm1707"><sup class="footnote">[48]</sup></a>
</p>
                <pre class="screen">
make test
</pre>
              </li>
              <li class="listitem">
                <p>
<span class="command"><strong>dh_auto_install</strong></span>thường thực hiện như sau nếu
<code class="filename">Makefile</code> tồn tại với target <code class="literal">install</code>
(dòng căn chỉnh cho dễ đọc) 
</p>
                <pre class="screen">
make install \
  DESTDIR=<em class="replaceable"><code>/path/to</code></em>/<em class="replaceable"><code>package</code></em>_<em class="replaceable"><code>version</code></em>-<em class="replaceable"><code>revision</code></em>/debian/<em class="replaceable"><code>package</code></em>
</pre>
              </li>
            </ul>
          </div>
          <p>
Tất cả các target yêu cầu lệnh <span class="command"><strong>fakeroot</strong></span> sẽ được chứa
<span class="command"><strong>dh_testroot</strong></span>, nó sẽ xuất hiện lỗi nếu bạn không sử dụng
lệnh này để giả vờ là root.
</p>
          <p>
Phần quan trọng cần biết là tệp <code class="filename">rules</code> được tạo bởi
<span class="command"><strong>dh_make</strong></span> và nó chỉ là một đề xuất. Nó sẽ làm việc cho hầu
hết các gói nhưng đối với những thứ phức tạp hơn, đừng ngại tùy chỉnh nó để
phù hợp với nhu cầu của bạn.
</p>
          <p>
Mặc dù <code class="literal">install</code> không phải là target bắt buộc, nó hỗ trợ.
<code class="literal">fakeroot dh install</code> hành động như <code class="literal">fakeroot dh
binary</code> nhưng dừng lại sau <span class="command"><strong>dh_fixperms</strong></span>.
</p>
        </div>
        <div class="section">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a id="customrules"/>4.4.3. Tuỳ chỉnh tệp <code class="filename">rules</code></h3>
              </div>
            </div>
          </div>
          <p>
Có nhiều cách để tuỳ chỉnh tệp <code class="filename">rules</code> đã được tạo ra bởi
lệnh  <span class="command"><strong>dh</strong></span>
</p>
          <p>
Lệnh <code class="literal">dh $@</code> có thể được tuỳ chỉnh như sau: <a href="#ftn.idm1743" class="footnote" id="idm1743"><sup class="footnote">[49]</sup></a>
</p>
          <div class="itemizedlist">
            <ul class="itemizedlist">
              <li class="listitem">
                <p>
Thêm lệnh hỗ trợ <span class="command"><strong>dh_python2</strong></span>.  (Tuỳ chọn tốt nhất cho
Python.) <a href="#ftn.idm1753" class="footnote" id="idm1753"><sup class="footnote">[50]</sup></a>
</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist">
                    <li class="listitem">
                      <p>
Bao gồm gói <code class="systemitem">python</code> trong trường
<code class="literal">Build-Depends</code>.
</p>
                    </li>
                    <li class="listitem">
                      <p>
Sử dụng <code class="literal">dh $@ --with python2</code>.
</p>
                    </li>
                    <li class="listitem">
                      <p>
Việc này xử lý các mô-đun Python sử dụng framework <code class="systemitem">python</code>
</p>
                    </li>
                  </ul>
                </div>
              </li>
              <li class="listitem">
                <p>
Thêm lệnh hỗ trợ <span class="command"><strong>dh_pysupport</strong></span>. 
</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist">
                    <li class="listitem">
                      <p>
Bao gồm gói <code class="systemitem">python-support</code> trong
trường <code class="literal">Build-Depends</code>.
</p>
                    </li>
                    <li class="listitem">
                      <p>
Sử dụng <code class="literal">dh $@ --with pysupport</code>
</p>
                    </li>
                    <li class="listitem">
                      <p>
Việc này xử lý các mô-đun Python sử dụng framework <code class="systemitem">python-support</code>
</p>
                    </li>
                  </ul>
                </div>
              </li>
              <li class="listitem">
                <p>
Thêm lệnh hỗ trợ <span class="command"><strong>dh_pycentral</strong></span>. (không dùng nữa)
</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist">
                    <li class="listitem">
                      <p>
Bao gồm gói <code class="systemitem">python-central</code> trong
trường <code class="literal">Build-Depends</code>.
</p>
                    </li>
                    <li class="listitem">
                      <p>
Sử dụng <code class="literal">dh $@ --with python-central</code>
</p>
                    </li>
                    <li class="listitem">
                      <p>
Nó cũng bỏ kích hoạt lệnh <span class="command"><strong>dh_pysupport</strong></span>
</p>
                    </li>
                    <li class="listitem">
                      <p>
Việc này xử lý các mô-đun Python sử dụng framework <code class="systemitem">python-central</code>
</p>
                    </li>
                  </ul>
                </div>
              </li>
              <li class="listitem">
                <p>
Thêm lệnh hỗ trợ <span class="command"><strong>dh_installtex</strong></span>
</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist">
                    <li class="listitem">
                      <p>
Bao gồm gói <code class="systemitem">tex-common</code> trong trường
<code class="literal">Build-Depends</code>.
</p>
                    </li>
                    <li class="listitem">
                      <p>
Sử dụng <code class="literal">dh $@ --with tex</code>
</p>
                    </li>
                    <li class="listitem">
                      <p>
Thao tác này sẽ đăng ký các phông chữ Loại 1, các mẫu phân đoạn và các định
dạng với TeX.
</p>
                    </li>
                  </ul>
                </div>
              </li>
              <li class="listitem">
                <p>
Thêm 2 lệnh hỗ trợ <span class="command"><strong>dh_quilt_patch</strong></span> và
<span class="command"><strong>dh_quilt_unpatch</strong></span>
</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist">
                    <li class="listitem">
                      <p>
Bao gồm gói <code class="systemitem">quilt</code> trong trường
<code class="literal">Build-Depends</code>.
</p>
                    </li>
                    <li class="listitem">
                      <p>
Sử dụng <code class="literal">dh $@ --with quilt</code>
</p>
                    </li>
                    <li class="listitem">
                      <p>
Nó áp dụng và bỏ áp dụng các bản vá cho mã nguồn ở thượng nguồn từ các tệp
tin trong thư mục  <code class="filename">debian/patches</code> cho gói nguồn với
định dạng <code class="literal">1.0</code>.
</p>
                    </li>
                    <li class="listitem">
                      <p>
Điều này là không cần thiết nếu bạn sử dụng định dạng gói nguồn mới
<code class="literal">3.0 (quilt)</code>.
</p>
                    </li>
                  </ul>
                </div>
              </li>
              <li class="listitem">
                <p>
Thêm lệnh hỗ trợ <span class="command"><strong>dh_dkms</strong></span>
</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist">
                    <li class="listitem">
                      <p>
Bao gồm gói <code class="systemitem">dkms</code> trong trường
<code class="literal">Build-Depends</code>.
</p>
                    </li>
                    <li class="listitem">
                      <p>
Sử dụng <code class="literal">dh $@ --with dkms</code>
</p>
                    </li>
                    <li class="listitem">
                      <p>
Điều này xử lý chính xác việc sử dụng DKMS của gói mô-đun hạt nhân.
</p>
                    </li>
                  </ul>
                </div>
              </li>
              <li class="listitem">
                <p>
Thêm lệnh hỗ trợ <span class="command"><strong>dh_autotools-dev_updateconfig</strong></span> và
<span class="command"><strong>dh_autotools-dev_restoreconfig</strong></span>.
</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist">
                    <li class="listitem">
                      <p>
Bao gồm gói <code class="systemitem">autotools-dev</code> trong
trường <code class="literal">Build-Depends</code>.
</p>
                    </li>
                    <li class="listitem">
                      <p>
Sử dụng <code class="literal">dh $@ --with autotools-dev</code>
</p>
                    </li>
                    <li class="listitem">
                      <p>
Việc này cập nhật và khôi phục tệp <code class="filename">config.sub</code> và
<code class="filename">config.guess</code>.
</p>
                    </li>
                  </ul>
                </div>
              </li>
              <li class="listitem">
                <p>
Thêm lệnh hỗ trợ <span class="command"><strong>dh_autoreconf</strong></span> và
<span class="command"><strong>dh_autoreconf_clean</strong></span>.
</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist">
                    <li class="listitem">
                      <p>
Bao gồm gói  <code class="systemitem">dh-autoreconf</code> package
in <code class="literal">Build-Depends</code>.
</p>
                    </li>
                    <li class="listitem">
                      <p>
Sử dụng <code class="literal">dh $@ --with autoreconf</code>.
</p>
                    </li>
                    <li class="listitem">
                      <p>
Nó cập nhật các tệp GNU Build System và khôi phục chúng sau khi xây dựng.
</p>
                    </li>
                  </ul>
                </div>
              </li>
              <li class="listitem">
                <p>
Thêm lệnh hỗ trợ <span class="command"><strong>dh_girepository</strong></span>.
</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist">
                    <li class="listitem">
                      <p>
Bao gồm gói <code class="systemitem">gobject-introspection</code>
trong trường <code class="literal">Build-Depends</code>.
</p>
                    </li>
                    <li class="listitem">
                      <p>
Use <code class="literal">dh $@ --with gir</code>.
</p>
                    </li>
                    <li class="listitem">
                      <p>
Điều này tính toán các gói phụ thuộc cho các gói truyền dữ liệu đối tượng
GObject và tạo ra tên các gói thay thế cho <code class="literal">${gir:Depends}</code>
</p>
                    </li>
                  </ul>
                </div>
              </li>
              <li class="listitem">
                <p>
Thêm hỗ trợ cho tính năng gõ nhanh trong <span class="command"><strong>bash</strong></span>
</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist">
                    <li class="listitem">
                      <p>
Bao gồm gói <code class="systemitem">bash-completion</code> trong
trường <code class="literal">Build-Depends</code>.
</p>
                    </li>
                    <li class="listitem">
                      <p>
Sử dụng <code class="literal">dh $@ --with bash-completion</code>
</p>
                    </li>
                    <li class="listitem">
                      <p>
Cài đặt <span class="command"><strong>bash</strong></span> completions sử dụng một tệp cấu hình tại
<code class="filename">debian/<em class="replaceable"><code>package</code></em>.bash-completion</code>.
</p>
                    </li>
                  </ul>
                </div>
              </li>
            </ul>
          </div>
          <p>
Nhiều lệnh <span class="command"><strong>dh_*</strong></span> được gọi từ <span class="command"><strong>dh</strong></span> mới có
thể tuỳ chỉnh các tệp cấu hình tương ứng trong thư mục
<code class="filename">debian</code>.  Xem <a class="xref" href="dother.vi.html" title="Chương 5. Other files under the debian directory">Chương 5, <em>Other files under the <code class="filename">debian</code> directory</em></a> và sách hướng dẫn
của mỗi lệnh cho việc tùy chỉnh tính năng như vậy.
</p>
          <p>
Bạn có thể cần phải chạy lệnh <span class="command"><strong>dh_*</strong></span> được gọi qua
<span class="command"><strong>dh</strong></span> mới với các đối số được thêm vào, hoặc để chạy các
lệnh bổ sung với chúng, hoặc bỏ qua chúng.  Đối với các trường hợp như vậy,
bạn tạo một target mới là
<code class="literal">override_dh_<em class="replaceable"><code>foo</code></em></code> bằng quy tắc
của nó trong tệp <code class="filename">rules</code> địng nghĩa một target
<code class="literal">override_dh_<em class="replaceable"><code>foo</code></em></code> cho lệnh
<span class="command"><strong>dh_<em class="replaceable"><code>foo</code></em></strong></span> bạn muốn thay đổi. Về
cơ bản có nghĩa là <span class="emphasis"><em>chạy tôi thay vì mặc
định</em></span>. <a href="#ftn.idm1922" class="footnote" id="idm1922"><sup class="footnote">[51]</sup></a>
</p>
          <p>
Xin lưu ý rằng các lệnh <span class="command"><strong>dh_auto_*</strong></span> có xu hứng làm nhiều
hơn những gì đã giải thích một cách đơn giản ở đây nhằm có thể quản lý toàn
bộ trường hợp có thể xảy ra.  Nó sẽ là một ý tưởng tồi để sử dụng các target
<code class="literal">override_dh_*</code> để thay thế các lệnh tương đương đã đơn
giản hoá (ngoại trừ target <code class="literal">override_dh_auto_clean</code> target)
vì nó có thể bỏ qua những tính năng thông minh từ gói <code class="systemitem">debhelper</code> features.
</p>
          <p>
Ví dụ: Nếu bạn muốn lưu dữ liệu cấu hình hệ thống vào thư mục
<code class="filename">/etc/gentoo</code> thay vì thư mục cha
<code class="filename">/etc</code> cho gói <code class="systemitem">gentoo</code> hãy sử dụng Autotools, bạn có thể viết đè
đối số mặc định <code class="literal">--sysconfig=/etc</code> được sử dụng bởi lệnh
<span class="command"><strong>dh_auto_configure</strong></span>để chaỵ lệnh
<span class="command"><strong>./configure</strong></span> như sau:
</p>
          <pre class="screen">
override_dh_auto_configure:
        dh_auto_configure -- --sysconfig=/etc/gentoo
</pre>
          <p>
Các đối số được truyền vào <code class="literal">--</code> sẽ được nối vào đối số mặc
định của chương trình "tự động-thực hiện" để ghi đè chúng.  Sử dụng lệnh
<span class="command"><strong>dh_auto_configure</strong></span> sẽ tốt hơn so với việc trực tiếp gọi
lệnh <span class="command"><strong>./configure</strong></span> ở đây vì nó sẽ chỉ ghi đè đối số
<code class="literal">--sysconfig</code> mà giữ lại bất kỳ đối số hữu ích nào khác cho
lệnh <span class="command"><strong>./configure </strong></span>.
</p>
          <p>
Nếu tệp <code class="filename">Makefile</code> trong mã nguồn của gói <code class="systemitem">gentoo</code> yêu cầu bạn chỉ định target
<code class="literal">build</code> là target để xây dựng chương trình đó <a href="#ftn.idm1950" class="footnote" id="idm1950"><sup class="footnote">[52]</sup></a>, bạn có thể tạo một target
<code class="literal">override_dh_auto_build</code> để kích hoạt điều này.
</p>
          <pre class="screen">
override_dh_auto_build:
        dh_auto_build -- build
</pre>
          <p>
Điều này đảm bảo <code class="literal">$(MAKE)</code> được chạy với tất cả các đối số
mặc định được cung cấp bởi lệnh <span class="command"><strong>dh_auto_build</strong></span> cộng với
đối số <code class="literal">build</code>.
</p>
          <p>
Nếu tệp <code class="filename">Makefile</code> trong mã nguồn cho <code class="systemitem">gentoo</code> yêu cầu bạn chỉ định target
<code class="literal">packageclean</code> để làm sạch môi trường xây dựng cho gói
Debian package thay vì sử dụng <code class="literal">distclean</code> hoặc
<code class="literal">clean</code>, bạn có thể tạo một target
<code class="literal">override_dh_auto_clean</code> để kích hoạt chúng.
</p>
          <pre class="screen">
override_dh_auto_clean:
        $(MAKE) packageclean
</pre>
          <p>
Nếu tệp <code class="filename">Makefile</code> trong mã nguồn cho <code class="systemitem">gentoo</code> chứa một target <code class="literal">test</code>
mà bạn không muốn chạy nó trong quá trình xây dựng gói Debian, bạn có thể sử
dụng một target <code class="literal">override_dh_auto_test</code> trống để bỏ qua nó.
</p>
          <pre class="screen">
override_dh_auto_test:
</pre>
          <p>
Nếu <code class="systemitem">gentoo</code> có chứa changelog từ
thượng nguồn khác thường như  tệp <code class="filename">FIXES</code>,
<span class="command"><strong>dh_installchangelogs</strong></span> mặc định sẽ không cài đặt tệp
này. Lệnh <span class="command"><strong>dh_installchangelogs</strong></span> yêu cầu
<code class="filename">FIXES</code> như là đối số của nó để cài đặt tệp này.
<a href="#ftn.idm1980" class="footnote" id="idm1980"><sup class="footnote">[53]</sup></a>
</p>
          <pre class="screen">
override_dh_installchangelogs:
        dh_installchangelogs FIXES
</pre>
          <p>
Khi bạn sử dụng lệnh <span class="command"><strong>dh</strong></span> mới, hãy sử dụng các target rõ
ràng được liệt kê trong <a class="xref" href="dreq.vi.html#targets" title="4.4.1. Các target của tệp rules">Phần 4.4.1, “Các target của tệp <code class="filename">rules</code>”</a>, khác với target
<code class="literal">get-orig-source</code> , có thể khó khăn để hiểu được chính xác
hiệu quả. Vui lòng hạn chế target rõ ràng đối với các target
<code class="literal">override_dh_*</code> và các target độc lập, nếu có thể.
</p>
        </div>
      </div>
      <div class="footnotes">
        <br/>
        <hr/>
        <div id="ftn.idm1156" class="footnote">
          <p><a href="#idm1156" class="para"><sup class="para">[27] </sup></a>
Trong chương này, các tệp tin trong thư mục <code class="filename">debian</code> được
đề cập đến mà không có <code class="filename">debian/</code> để đơn giản hóa bất cứ
khi nhắc tới.
</p>
        </div>
        <div id="ftn.idm1189" class="footnote">
          <p><a href="#idm1189" class="para"><sup class="para">[28] </sup></a>Xem <a class="ulink" href="http://www.debian.org/doc/debian-policy/ch-archive.html#s-subsections">Debian Policy Manual, 2.4
"Sections"</a> và <a class="ulink" href="http://packages.debian.org/unstable/">List of sections in
<code class="literal">sid</code></a>.</p>
        </div>
        <div id="ftn.idm1197" class="footnote">
          <p><a href="#idm1197" class="para"><sup class="para">[29] </sup></a>Xem <a class="ulink" href="http://www.debian.org/doc/debian-policy/ch-archive.html#s-priorities">Debian Policy Manual, 2.5
"Priorities"</a>.
</p>
        </div>
        <div id="ftn.idm1220" class="footnote">
          <p><a href="#idm1220" class="para"><sup class="para">[30] </sup></a>Xem <a class="ulink" href="http://www.debian.org/doc/debian-policy/ch-relationships.html#s-sourcebinarydeps">Debian Policy
Manual, 7.7 "Relationships between source and binary packages -
Build-Depends, Build-Depends-Indep, Build-Conflicts,
Build-Conflicts-Indep"</a>.</p>
        </div>
        <div id="ftn.idm1250" class="footnote">
          <p><a href="#idm1250" class="para"><sup class="para">[31] </sup></a> Tình huống này hơi lạ là một tính năng được ghi lại trong  <a class="ulink" href="http://www.debian.org/doc/debian-policy/footnotes.html#f55">Debian Policy Manual, Footnotes
55</a>. Đây không phải là do sử dụng lệnh <span class="command"><strong>dh</strong></span> trong
tệp tin <code class="filename">debian/rules</code> nhưng do cách
<span class="command"><strong>dpkg-buildpackage</strong></span> làm việc. Tình huống tương tự cũng áp
dụng cho <a class="ulink" href="https://bugs.launchpad.net/launchpad-buildd/+bug/238141">hệ thống xây
dựng tự động cho Ubuntu</a>.  </p>
        </div>
        <div id="ftn.idm1282" class="footnote">
          <p><a href="#idm1282" class="para"><sup class="para">[32] </sup></a>Xem <a class="ulink" href="http://www.debian.org/doc/debian-policy/ch-controlfields.html#s-f-Architecture">Debian Policy Manual, 5.6.8
"Architecture"</a> để biết chi tiết.
</p>
        </div>
        <div id="ftn.idm1330" class="footnote">
          <p><a href="#idm1330" class="para"><sup class="para">[33] </sup></a>Xem <a class="ulink" href="http://www.debian.org/doc/debian-policy/ch-relationships.html">Debian Policy Manual, 7 "Declaring
relationships between packages"</a>.
</p>
        </div>
        <div id="ftn.idm1427" class="footnote">
          <p><a href="#idm1427" class="para"><sup class="para">[34] </sup></a>Những mô tả này bằng tiếng Anh. Các bản dịch về các mô tả này được cung cấp
bởi <a class="ulink" href="http://www.debian.org/intl/l10n/ddtp">The Debian Description Translation Project -
DDTP</a>.</p>
        </div>
        <div id="ftn.idm1432" class="footnote">
          <p><a href="#idm1432" class="para"><sup class="para">[35] </sup></a>Xem <a class="ulink" href="http://www.debian.org/doc/manuals/developers-reference/best-pkging-practices.html#bpp-vcs">Debian Developer's Reference,
6.2.5. "Version Control System location"</a>.
</p>
        </div>
        <div id="ftn.idm1496" class="footnote">
          <p><a href="#idm1496" class="para"><sup class="para">[36] </sup></a>Nếu bạn sử dụng lệnh <code class="literal">dch -r</code> để tạo thay đổi cuối này, vui
lòng đảm bảo bạn đã lưu tệp <code class="filename">changelog</code> một cách rõ ràng
bởi trình soạn thảo</p>
        </div>
        <div id="ftn.idm1518" class="footnote">
          <p><a href="#idm1518" class="para"><sup class="para">[37] </sup></a>Bạn có thể bắt đầu học cách viết <code class="filename">Makefile</code> từ <a class="ulink" href="http://www.debian.org/doc/manuals/debian-reference/ch12#_make">Debian Reference, 12.2. "Make"</a>.  Tài liệu khả
dụng như <a class="ulink" href="http://www.gnu.org/software/make/manual/html_node/index.html">http://www.gnu.org/software/make/manual/html_node/index.html</a> hoặc như gói <code class="systemitem">make-doc</code> trong <code class="literal">non-free</code>.
</p>
        </div>
        <div id="ftn.idm1526" class="footnote">
          <p><a href="#idm1526" class="para"><sup class="para">[38] </sup></a><a class="ulink" href="http://www.debian.org/doc/debian-policy/ch-source.html#s-debianrules">Debian Policy Manual, 4.9 "Main building
script: debian/rules"</a> giải thích chi tiết.</p>
        </div>
        <div id="ftn.idm1562" class="footnote">
          <p><a href="#idm1562" class="para"><sup class="para">[39] </sup></a> Target này được sử dụng bởi <code class="literal">dpkg-buildpackage</code> như trong
<a class="xref" href="build.vi.html#completebuild" title="6.1. (Tái) biên dịch toàn bộ">Phần 6.1, “(Tái) biên dịch toàn bộ”</a>.  </p>
        </div>
        <div id="ftn.idm1570" class="footnote">
          <p><a href="#idm1570" class="para"><sup class="para">[40] </sup></a> Target này được sử dụng bởi <code class="literal">dpkg-buildpackage -B</code> như
trọng <a class="xref" href="build.vi.html#autobuilder" title="6.2. Tự động biên dịch">Phần 6.2, “Tự động biên dịch”</a>.  </p>
        </div>
        <div id="ftn.idm1578" class="footnote">
          <p><a href="#idm1578" class="para"><sup class="para">[41] </sup></a> Target này được sử dụng bởi <code class="literal">dpkg-buildpackage -A</code>.  </p>
        </div>
        <div id="ftn.idm1610" class="footnote">
          <p><a href="#idm1610" class="para"><sup class="para">[42] </sup></a> Thao tác này sử dụng tính năng mới của <code class="systemitem">debhelper</code> v7+. Các khái niệm thiết kế của nó
được giải thích tại <a class="ulink" href="http://joey.kitenet.net/talks/debhelper/debhelper-slides.pdf">Not Your Grandpa's
Debhelper</a> được trình bày ở DebConf9 bởi tác giả <code class="systemitem">debhelper</code>.  Từ phiên bản
<code class="literal">lenny</code>, <span class="command"><strong>dh_make</strong></span> đã tạo ra một tệp
<code class="filename">rules</code> phức tạp hơn nhiều với các quy tắc và nhiều kịch
bản <span class="command"><strong>dh_*</strong></span> cho mỗi quy tắc, hầu hết trong số chúng hiện
không cần thiết  (và hiểu thị tuổi của gói). Lệnh <span class="command"><strong>dh</strong></span> mới
đơn giản và giải phóng chúng ta khỏi các công việc thường xuyên làm "thủ
công". Bạn vẫn có đủ sức mạnh để tùy biến quá trình với các target là
<code class="literal">override_dh_*</code>. Xem <a class="xref" href="dreq.vi.html#customrules" title="4.4.3. Tuỳ chỉnh tệp rules">Phần 4.4.3, “Tuỳ chỉnh tệp <code class="filename">rules</code>”</a>.  Nó chỉ
dựa trên gói <code class="systemitem">debhelper</code> và không làm
xáo trộn tiến trình xây dựng gói như cách mà gói <code class="systemitem">cdbs</code> có xu hướng.  </p>
        </div>
        <div id="ftn.idm1626" class="footnote">
          <p><a href="#idm1626" class="para"><sup class="para">[43] </sup></a> Bạn có thể xác minh trình tự thực tế của các chương trình
<span class="command"><strong>dh_*</strong></span> bằng gọi một
<code class="literal"><em class="replaceable"><code>target</code></em></code> mà không thật sự chạy
chúng bởi gọi <code class="literal">dh --no-act
<em class="replaceable"><code>target</code></em></code> hoặc <code class="literal">debian/rules --
'--no-act <em class="replaceable"><code>target</code></em>'</code>.  </p>
        </div>
        <div id="ftn.idm1650" class="footnote">
          <p><a href="#idm1650" class="para"><sup class="para">[44] </sup></a>Ví dụ sau đây giả định tệp <code class="filename">debian/compat</code> của bạn có một
giá trị bằng hoặc lớn hơn 9 để tránh gọi bất kỳ câu lệnh hỗ trợ từ python tự
động.
</p>
        </div>
        <div id="ftn.idm1670" class="footnote">
          <p><a href="#idm1670" class="para"><sup class="para">[45] </sup></a> Để có thông tin đầy đủ về những gì các tập lệnh <span class="command"><strong>dh_*</strong></span> thực
hiện chính xác, và các tùy chọn khác của chúng là gì, vui lòng đọc các trang
hướng dẫn tương ứng và tài liệu <code class="systemitem">debhelper</code>.  </p>
        </div>
        <div id="ftn.idm1675" class="footnote">
          <p><a href="#idm1675" class="para"><sup class="para">[46] </sup></a> Các lệnh hỗ trợ các môi trường xây dựng khác như
<code class="filename">setup.py</code> có thể được liệt kê bằng cách thực thi
<code class="literal">dh_auto_build --list</code> trong thư mục mã nguồn gói.  </p>
        </div>
        <div id="ftn.idm1685" class="footnote">
          <p><a href="#idm1685" class="para"><sup class="para">[47] </sup></a> Nó thực sự tìm kiếm target có sẵn đầu tiên trong
<code class="filename">Makefile</code> trong số  <code class="literal">distclean</code>,
<code class="literal">realclean</code>, hoặc <code class="literal">clean</code>, và thực hiện
điều đó.
</p>
        </div>
        <div id="ftn.idm1707" class="footnote">
          <p><a href="#idm1707" class="para"><sup class="para">[48] </sup></a> Nó thực sự tìm kiếm target đầu tiên có sẵn trong tệp
<code class="filename">Makefile</code> trong số <code class="literal">test</code> hoặc
<code class="literal">check</code>, và thực hiện nó.</p>
        </div>
        <div id="ftn.idm1743" class="footnote">
          <p><a href="#idm1743" class="para"><sup class="para">[49] </sup></a> Nếu một gói cài đặt tệp với đường dẫn
<code class="filename">/usr/share/perl5/Debian/Debhelper/Sequence/<em class="replaceable"><code>custom_name</code></em>.pm</code>,
bạn nên kích hoạt chức năng tuỳ chỉnh của nó bằng <code class="literal">dh $@ --with
<em class="replaceable"><code>custom-name</code></em></code>.  </p>
        </div>
        <div id="ftn.idm1753" class="footnote">
          <p><a href="#idm1753" class="para"><sup class="para">[50] </sup></a> Việc sử dụng <span class="command"><strong>dh_python2</strong></span> được yêu thích hơn là sử dụng
<span class="command"><strong>dh_pysupport</strong></span> và <span class="command"><strong>dh_pycentral</strong></span>. Đừng sử
dụng <span class="command"><strong>dh_python</strong></span>  </p>
        </div>
        <div id="ftn.idm1922" class="footnote">
          <p><a href="#idm1922" class="para"><sup class="para">[51] </sup></a> Trong phiên bản <code class="literal">lenny</code>, nếu bạn muốn thay đổi hành vi của
một tập lệnh <span class="command"><strong>dh_*</strong></span>, bạn sẽ phải tìm thấy dòng liên quan
trong <code class="filename">rules</code> và tự điều chỉnh nó.  </p>
        </div>
        <div id="ftn.idm1950" class="footnote">
          <p><a href="#idm1950" class="para"><sup class="para">[52] </sup></a>
<span class="command"><strong>dh_auto_build</strong></span> với không có đối số sẽ thực hiện target đầu
tiên trong tệp <code class="filename">Makefile</code>.  </p>
        </div>
        <div id="ftn.idm1980" class="footnote">
          <p><a href="#idm1980" class="para"><sup class="para">[53] </sup></a> Các tệp tin <code class="filename">debian/changelog</code> và
<code class="filename">debian/NEWS</code> luôn luôn được cài đặt tự động. Lịch sử sửa
đổi của thượng nguồn được tìm thấy được chuyển thành tệp chữ thường
<code class="filename">changelog</code>, <code class="filename">changes</code>,
<code class="filename">changelog.txt</code>, và <code class="filename">changes.txt</code>.
</p>
        </div>
      </div>
    </div>
    <div class="navfooter">
      <hr/>
      <table width="100%" summary="Navigation footer">
        <tr>
          <td align="left"><a accesskey="p" href="modify.vi.html"><img src="images/prev.png" alt="Trước đó"/></a> </td>
          <td align="center"> </td>
          <td align="right"> <a accesskey="n" href="dother.vi.html"><img src="images/next.png" alt="Kế tiếp"/></a></td>
        </tr>
        <tr>
          <td align="left" valign="top">Chương 3. Sửa đổi mã nguồn </td>
          <td align="center">
            <a accesskey="h" href="index.vi.html">
              <img src="images/home.png" alt="Đầu"/>
            </a>
          </td>
          <td align="right" valign="top"> Chương 5. Other files under the <code class="filename">debian</code> directory</td>
        </tr>
      </table>
    </div>
  </body>
</html>
